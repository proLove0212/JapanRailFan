<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="icon" type="image/x-icon" href="./imgs/favicon.ico">
    <script src="./scripts/jquery.slim.min.js"></script>
    <script src="./scripts/popper.min.js"></script>
    <script src="./scripts/bootstrap.min.js"></script>
    <script src="./scripts/common.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#008d00">
    <title>Pass Calculator - JapanRailFan</title>
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-lg sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">JapanRailFan</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="trains.html">Trains</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="lines.html">Lines</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="companies.html">Operators</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="tickets.html">Tickets</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-3">
        <div id="alert-area">
            <!--Space placement for alerts related to the form. Dynamically generated in js-->
        </div>
        <div>
            <div class="category-header">
                <div class="card justify-content-center align-items-center p-3 mr-3">
                    <span class="material-symbols-sharp category-icon">calculate</span>
                </div>
                <h1 class="mb-0">Calculator</h1>
            </div>
            <hr class="divider">
        </div>
        <div class="row mb-3">
            <div class="col-12 d-flex">
                <button id="save-btn" class="custom-btn mr-3 d-flex justify-content-center" data-toggle="modal"
                    data-target="#saveListModal" onclick="initLoadSaveModal('save')">
                    <span class="material-symbols-sharp">save</span>
                    <span class="d-none d-md-inline ml-1">Save</span>
                </button>
                <button class="custom-btn mr-3 d-flex justify-content-center" data-toggle="modal" data-target="#loadListModal" onclick="initLoadSaveModal('load')">
                    <span class="material-symbols-sharp">draft</span>
                    <span class="d-none d-md-inline ml-1">Load</span>
                </button>
                <button class="custom-btn mr-3 d-flex justify-content-center" data-toggle="modal"
                    data-target="#deleteListModal">
                    <span class="material-symbols-sharp">delete</span>
                    <span class="d-none d-md-inline ml-1">Clear List</span>
                </button>
            </div>
        </div>

        <div class="row" id="calculator-list">
            <!--"No items in list" html code, see calculator.js for details-->
            <!-- <div class="col-12">
                <div class="card mb-3">
                    <div class="card-body d-flex justify-content-center align-items-center">
                        <h6 class="m-0">No Items in list</h6>
                    </div>
                </div>
            </div> -->
            <!-- <div class="col-12">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="d-flex mb-3">
                            <div class="flex-fill">
                                <h5 id="ticket-name-0" class="card-title">Sample Pass</h5>
                                <p id="ticket-qty-days-0" class="m-0">3 Persons - 7 Days</p>
                            </div>
                            <div>
                                <h5 id="ticket-price-0">¥5000</h5>
                            </div>
                        </div>
                        <div class="d-flex">
                            <button id="add-item-btn-0" onclick="addItemButtonClicked(this)"
                                class="custom-btn mr-3 d-flex justify-content-center">
                                <span class="material-symbols-sharp">add</span>
                            </button>
                            <button id="minus-item-btn-0" onclick="minusItemButtonClicked(this)" id="item-add-btn-0"
                                class="custom-btn mr-3 d-flex justify-content-center">
                                <span class="material-symbols-sharp">remove</span>
                            </button>
                            <button id="delete-item-btn-0" onclick="deleteItemButtonClicked(this)"
                                class="custom-btn mr-3 d-flex justify-content-center">
                                <span class="material-symbols-sharp">delete</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>
        <div class="row mb-3">
            <div class="col-12">
                <hr class="divider">
                <div class="d-flex">
                    <div class="flex-fill">
                        <h2>Total:</h2>
                    </div>
                    <div>
                        <h2 id="calculator-total-price">¥10000</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete List Modal -->
    <div class="modal fade" id="deleteListModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Delete List?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Delete the list? The action cannot be undone.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="deleteListButtonClicked()"
                        data-dismiss="modal">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Save Modal -->
    <div class="modal fade" id="deleteSaveModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Delete Saved List?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Delete the saved list? The action cannot be undone.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" data-toggle="modal" data-target="#saveListModal">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="deleteSaveButtonClicked()"
                        data-dismiss="modal" data-toggle="modal" data-target="#saveListModal">Delete Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Save List Modal -->
    <div class="modal fade" id="saveListModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Save As</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="calculator-save-form">
                    <div class="modal-body">
                        <div id="save-alert-area" class="">

                        </div>
                        <div id="calculator-save-list" class="row mb-3">
                            <!--Save list div-->
                            <!-- <div class="col-12 mb-1">
                                <div class="card gray">
                                    <div class="card-body">
                                        <div class="mb-1">
                                            <strong class="white">Sample Save</strong><br>
                                            <small class="m-0 white">3 Items - ¥10000</small>
                                        </div>
                                        <div class="d-flex">
                                            <button type="button" id="save-saveas-btn-savename" onclick="saveAsButtonClicked(this)"
                                                class="mr-1 p-1 custom-btn transparent-btn d-flex justify-content-center"
                                                data-toggle="tooltip" data-placement="bottom" title="Save to List">
                                                <span class="material-symbols-sharp">save_as</span>
                                            </button>
                                            <button type="button" id="save-delete-btn-savename" onclick="saveDeleteButtonClicked(this)"
                                                class="mr-1 p-1 custom-btn transparent-btn d-flex justify-content-center"
                                                data-toggle="tooltip" data-placement="bottom" title="Delete List">
                                                <span class="material-symbols-sharp">delete</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <!-- <div class="col-12">
                                <div class="card gray">
                                    <div class="card-body d-flex justify-content-center align-items-center">
                                        <h6 class="m-0">No Existing Saves</h6>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                        <div>
                            <label for="save-name">List name:</label><br>
                            <input id="save-name" class="w-100" placeholder="List name..." pattern="[^'\x22]*$" title="No quotation marks allowed in the list name" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" data-toggle="modal" data-target="#exportListModal" onclick="exportlistButtonClicked()">Export JSON</button>
                        <input type="submit" class="btn btn-primary" value="Save">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Load List Modal -->
    <div class="modal fade" id="loadListModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Load</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="load-alert-area" class="">

                    </div>
                    <div id="calculator-load-list" class="row mb-3">
                        <!--Load list div-->
                        <div class="col-12 mb-1">
                            <div class="card gray">
                                <div class="card-body">
                                    <div class="mb-1">
                                        <strong class="white">Sample Load</strong><br>
                                        <small class="m-0 white">3 Items - ¥10000</small>
                                    </div>
                                    <div class="d-flex">
                                        <button type="button" id="load-load-btn-savename" onclick="loadButtonClicked(this)" title="Load List"
                                            class="mr-1 p-1 custom-btn transparent-btn d-flex justify-content-center">
                                            <span class="material-symbols-sharp">input</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="col-12">
                            <div class="card gray">
                                <div class="card-body d-flex justify-content-center align-items-center">
                                    <h6 class="m-0">No Existing Saves</h6>
                                </div>
                            </div>
                        </div> -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" data-toggle="modal" data-target="#importListModal" onclick="exportlistButtonClicked()">Import JSON</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete List Modal -->
    <div class="modal fade" id="deleteListModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Delete List?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Delete the list? The action cannot be undone.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Import JSON</button>
                    <button type="button" class="btn btn-danger" onclick="deleteListButtonClicked()"
                        data-dismiss="modal">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Save Modal -->
    <div class="modal fade" id="importListModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Import JSON</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="save-import-form">
                    <div class="modal-body">
                        <textarea id="import-list-textarea" class="w-100" rows="10" placeholder="Paste JSON here..." required></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Import</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Export Save Modal-->
    <div class="modal fade" id="exportListModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Export JSON</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <textarea id="export-list-textarea" class="w-100" rows="10" readonly>This is a textarea</textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="./scripts/data.js"></script>
    <script src="./scripts/calculatorFunctions.js"></script>
    <script src="./scripts/calculator.js"></script>
</body>

</html>